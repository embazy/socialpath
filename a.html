<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BroadcastChannel Chat</title>
</head>
<body>
<h1>Local Tab Chat</h1>
<input type="text" id="messageInput" placeholder="Type a message">
<button onclick="sendMessage()">Send</button>
<ul id="messages"></ul>

<script>
const channel = new BroadcastChannel('chat_channel');

channel.onmessage = (event) => addMessage(`Other: ${event.data}`);

function sendMessage() {
    const input = document.getElementById('messageInput');
    addMessage(`You: ${input.value}`);
    channel.postMessage(input.value);
    input.value = '';
}

function addMessage(msg) {
    const li = document.createElement('li');
    li.textContent = msg;
    document.getElementById('messages').appendChild(li);
}
</script>
</body>
</html>
